env:
  default:
    MYSQL_HOST: "mysql"
    MYSQL_PORT: 3306
    MYSQL_USERNAME: "{{.mysql.username}}"
    MYSQL_PASSWORD: "{{.mysql.password}}"
    MYSQL_DATABASE: "hatlonely"

ctx:
  personDB:
    type: mysql
    args:
      host: "${MYSQL_HOST}"
      port: "${MYSQL_PORT}"
      username: "${MYSQL_USERNAME}"
      password: "${MYSQL_PASSWORD}"
      database: "${MYSQL_DATABASE}"

case:
  - name: testMysql
    desc: 测试插入一条数据
    step:
      - desc: 插入一条数据
        name: insertPerson
        ctx: personDB
        req:
          sql: INSERT INTO `person` (`id`, `name`) VALUES (`1`, `hatlonely`)
        res:
        err:
      - desc: 查询插入数据
        name: selectPerson
        ctx: personDB
        req:
          sql: SELECT `id`, `name` FROM `person` WHERE `id` = 1
        res:
          id: 1
          name: hatlonely
      - req:
          sql: DELETE FROM `person` WHERE `id` = 1
